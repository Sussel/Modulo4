package testUI;

import io.qameta.allure.Description;
import io.qameta.allure.Owner;
import io.qameta.allure.junit4.DisplayName;
import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import pages.MainPage;
import pages.ShowLoginPage;
import pages.StartPage;
import session.Session;

public class LoginToDoIst {

    MainPage mainPage = new MainPage();
    ShowLoginPage showLoginPage = new ShowLoginPage();
    StartPage startPage = new StartPage();

    @Before
    public void before() {
        Session.getInstance().getDriver().get("https://todoist.com");
    }

    @Test
    @DisplayName("Login to todoist.com with user and password")
    @Description("Verify the login using user and password")
    @Owner("Sussel Villarroel")
    public void verifyTheLoginUsingUserAndPassword() throws InterruptedException {
        mainPage.loginButton.click();
        showLoginPage.emailTextBox.type("ucb1@ucb.com");
        showLoginPage.passwordTextBox.type("test1234");
        showLoginPage.loginButton.click();

        // verification
        Thread.sleep(30000);
        Assert.assertTrue("ERROR, no se pudo realizar el login!",startPage.leftDiv.isDisplayedOnPage());    }

    @After
    public void after(){
        Session.getInstance().closeBrowser();
    }
}
